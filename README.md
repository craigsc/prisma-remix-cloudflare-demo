# Quick demo of Prisma WASM engine + Remix issues

This is just a straight simple build using the starter template generated by running `npx create-remix@latest --template remix-run/remix/templates/cloudflare-workers`

You will need to add a postgres DB string to DATABASE_URL within .dev.vars but otherwise this should show off the issue in loading the WebAssembly engine

This is the stack I currently get from Prisma and it seems to be due to how bundling is performed with .wasm files:
<img width="873" alt="Screenshot 2024-01-11 at 3 12 16â€¯PM" src="https://github.com/craigsc/prisma-remix-cloudflare-demo/assets/236858/dfc1fa38-fb66-4e19-be20-16697ff7470a">


## Quick commands for running the demo
Run locally: `npm run dev`

Deploy to your own cloudflare account to run in production (simple wizard will walk you through setup): `npm run deploy`

## Development

You will be running two processes during development:

- The Miniflare server (miniflare is a local environment for Cloudflare Workers)
- The Remix development server

Both are started with one command:

```sh
npm run dev
```

Open up [http://127.0.0.1:8787](http://127.0.0.1:8787) and you should be ready to go!

If you want to check the production build, you can stop the dev server and run following commands:

```sh
npm run build
npm start
```

Then refresh the same URL in your browser (no live reload for production builds).

## Deployment

If you don't already have an account, then [create a cloudflare account here](https://dash.cloudflare.com/sign-up) and after verifying your email address with Cloudflare, go to your dashboard and set up your free custom Cloudflare Workers subdomain.

Once that's done, you should be able to deploy your app:

```sh
npm run deploy
```

## Resources
- [Remix Docs](https://remix.run/docs)
